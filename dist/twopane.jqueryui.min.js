/*! TwoPane Plugin - v0.1.0 - 2014-11-25
* https://github.com/giosh94mhz/twopane
* Copyright (c) 2014 Giorgio Premi; Licensed MIT */
!function(a){"user strict";function b(a,b,c){return a&&a>b?b=a:c&&b>c&&(b=c),b}var c={handles:"w"};a.widget("ui.resizable",a.ui.resizable,{resizeTo:function(b,c){void 0===c&&(c="se");var d=new a.Event("mousedown",{pageX:0,pageY:0});this._mouseStart(d),this.axis=c;var e=new a.Event("mouseup",{pageX:b.width-this.originalSize.width,pageY:b.height-this.originalSize.height});this._mouseDrag(e),this._mouseStop(e)}}),a.widget("giosh94mhz.twopane",{options:{left:"> *:nth-child(1)",right:"> *:nth-child(2)",resizable:{helper:"ui-resizable-helper ui-corner-all"},iframeFix:!1},_create:function(){this.element.addClass("giosh94mhz-twopane"),this.oldContent=a("<div>"),this.element.children().appendTo(this.oldContent),this.left=this._createPane("left",this.options),this.right=this._createPane("right",this.options),this.right.resizable(a.extend({},this.options.resizable,c)),this._on(this.element,{resizestart:function(){this._blockFrames(this.options.iframeFix===!0?"iframe":this.options.iframeFix)},resizestop:this._unblockFrames})},_init:function(){this._ensureResizableSize()},_createPane:function(b,c){var d=null;null!==c[b]&&(d=this.oldContent.find(c[b])),d?a("<div>").addClass("placeholder-"+b).insertBefore(d):d=a("<div>");var e=a("<div>").appendTo(this.element).addClass("giosh94mhz-"+b[0]+"-pane");return e.append(d).appendTo(this.element),delete c[b],e},_destroy:function(){this.right.resizable("destroy"),this.oldContent.find(".placeholder-left").replaceWith(this.left.children()),this.oldContent.find(".placeholder-right").replaceWith(this.right.children()),this.element.children().remove(),this.element.append(this.oldContent.children())},_setOption:function(b,c){switch(this._super(b,c),b){case"iframeFix":this.options.iframeFix=c;break;case"resizable":c=a.extend(this.options.resizable,c,{handles:"w"}),this.right.resizable("option",c),this.options.resizable=c,this._ensureResizableSize()}},_ensureResizableSize:function(){var a={width:this.right.outerWidth(),height:this.right.outerHeight()},c=this.options.resizable,d={width:b(c.minWidth,a.width,c.maxWidth),height:b(c.minHeight,a.height,c.maxHeight)};(a.width!==d.width||a.height!==d.height)&&this.right.resizable("resizeTo",d,"w")},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)}})}(jQuery);